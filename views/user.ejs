<%- include('./partials/header') -%>
<body>
    <div class="container" id="containers">
        <hr class="my-4">
        <h2 class="mt-4"><%=userEmail%></h2>
        <form class="row g-2" action="/addNewsletter" method="post">
            <div class="col-lg-6 col-sm-8">
              <label for="inputPassword2" class="visually-hidden">Newsletter</label>
              <input name="newsletterName" type="text" class="form-control" id="inputPassword2" placeholder="Enter newsletter email">
            </div>
            <div class="col-lg-6 col-sm-4">
              <button type="submit" class="btn btn-primary mb-3">Submit</button>
            </div>
          </form>
        <form action="/logout" method="post">
            <button class="btn btn-danger mt-1">Logout</button>
        </form>
    </div>
    
    <div class="container" id="containers">
        <hr class="my-4">
        <h2 class="mt-4">Subscribed Newsletters</h2>
        <%if(subNews.length===0){%>
            <p>No Newsletters subscribed !</p>
        <%}else{%>
            <%subNews.forEach(function(data){%>
                <p>
                    <form action="/unsubscribe" method="post">
                        <input type="hidden" name="userID" value="<%=data.uid%>"/>
                        <input type="hidden" name="newsID" value="<%=data.id%>"/>
                        <button class="btn btn-danger me-3">Unsubscribe</button><%=data.name%>
                    </form>
                </p>
            <%});%>
        <%}%>
    </div>

    <div class="container" id="containers">
        <hr class="my-4">
        <h2 class="mt-4">Available Newsletters</h2>
        <!-- Add code for displaying all newsletters here -->
        <%if(availNews.length===0){%>
            <p>No Newsletters Available !</p>
        <%}else{%>
            <%availNews.forEach(function(data){%>
                <p>
                    <form action="/subscribe" method="post">
                        <input type="hidden" name="newsID" value="<%=data.id%>"/>
                        <input type="hidden" name="newsName" value="<%=data.name%>"/>
                        <button class="btn btn-primary me-3">Subscribe</button><%=data.name%>
                    </form>
                </p> 
            <%});%>
        <%}%>
    </div>
</body>
<%- include('./partials/footer') -%>